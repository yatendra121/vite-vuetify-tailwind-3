var e=Object.defineProperty,t=(t,r,s)=>(((t,r,s)=>{r in t?e(t,r,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[r]=s})(t,"symbol"!=typeof r?r+"":r,s),s);import{F as r}from"./vee-validate.esm.be5422b7.js";import{a as s}from"./index.bf657bbf.js";import{p as o,F as a,an as n,Z as i}from"./vendor.e5ff202b.js";const u=(e,t,r)=>{const s=t||new FormData;let o;for(const a in e)e.hasOwnProperty(a)&&(o=r?r+"["+a+"]":a,e[a]instanceof Date?s.append(o,e[a].toISOString()):"object"!=typeof e[a]||e[a]instanceof File||e[a]instanceof Blob?e[a]instanceof Blob&&e[a]?s.append(o,e[a],e[a].name):e[a]&&s.append(o,e[a]):u(e[a],s,o));return s};class c{constructor(e){t(this,"data",null),t(this,"error",""),t(this,"errors",""),t(this,"message",""),this.data=e.data,this.error=e.error,this.errors=e.errors,this.message=e.message}getData(){return this.data}getError(){return this.error}getErrors(){return this.errors}getMessage(){return this.message}}const l=o({components:{VForm:r},props:{action:{type:String,required:!0,default:()=>""},method:{type:String,default:()=>"POST"},formData:{type:Boolean,default:()=>!1}},emits:["submitedSuccess","submitedError","submitedError"],setup(e,{attrs:t,emit:o,slots:l}){const m=(t,r)=>{const a=e.formData?u(t):t;s(e.action,{method:e.method,data:a}).then((e=>{const t=new c(e);o("submitedSuccess",t)})).catch((e=>{let t;try{t=JSON.parse(e.request.response);const s=new c(t);r.setErrors(s.getErrors()),o("submitedError",s)}catch(s){throw new Error(e.request.response)}}))};return()=>a(i,null,[a(r,n({onSubmit:m},t),{default:()=>{var e;return[a(i,null,[null==(e=l.default)?void 0:e.call(l)])]},...l})])}});export{l as default};
