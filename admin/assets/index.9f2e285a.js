import{s as n,P as k}from"./index.de00f1f8.js";import{p as i,r as m,a9 as l,aK as S,g as d,aL as g}from"./vendor.88382afc.js";function r(){return{useOnSocket:(e,s)=>(n.on(e,s),()=>{n.off(e)}),useEmitSocket:(e,s)=>{n.emit(e,s)},useOffSocket:()=>{n.off()},defaultSocketOffEvent:()=>{console.log("Not assigned any socket off event")},socket:n}}const v=k.getInstance(),E=v.getSocketUrl(),h=i({setup(){const t=m([]),a=m(""),f=o=>{t.value=[o,...t.value]};let{defaultSocketOffEvent:c}=r();const{useOnSocket:e,useEmitSocket:s}=r();l(()=>{c=e("newmsg",f)}),S(()=>{c()});const u=()=>{s("message",{message:a.value,email:"yatendra@singsys.com"})};return fetch(E+"/users-chat").then(o=>o.json()).then(o=>{t.value=o.data}),{items:t,sendMessage:u,message:a,messageOffEvent:c,mdiAccount:d,mdiHome:g}}});export{h as default};
