import{s as e,P as s}from"./index.bf657bbf.js";import{p as t,r as a,a5 as n,aM as o,l as f,aN as c}from"./vendor.e5ff202b.js";function u(){return{useOnSocket:(s,t)=>{e.on(s,t);return()=>{e.off(s)}},useEmitSocket:(s,t)=>{e.emit(s,t)},useOffSocket:()=>{e.off()},defaultSocketOffEvent:()=>{},socket:e}}const m=s.getInstance().getSocketUrl(),r=t({setup(){const e=a([]),s=a(""),t=s=>{e.value=[s,...e.value]};let{defaultSocketOffEvent:r}=u();const{useOnSocket:i,useEmitSocket:l}=u();n((()=>{r=i("newmsg",t)})),o((()=>{r()}));return fetch(m+"/users-chat").then((e=>e.json())).then((s=>{e.value=s.data})),{items:e,sendMessage:()=>{l("message",{message:s.value,email:"yatendra@singsys.com"})},message:s,messageOffEvent:r,mdiAccount:f,mdiHome:c}}});export{r as default};
