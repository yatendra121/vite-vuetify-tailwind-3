var r=Object.defineProperty,e=(e,t,s)=>(((e,t,s)=>{t in e?r(e,t,{enumerable:!0,configurable:!0,writable:!0,value:s}):e[t]=s})(e,"symbol"!=typeof t?t+"":t,s),s);import{o as t}from"./formData.011a5776.js";import{F as s}from"./vee-validate.esm.4c969a3a.js";import{a}from"./index.96a51d4a.js";import{t as o,G as i,ai as n,U as u}from"./vendor.4e8d2bd0.js";class m{constructor(r){e(this,"data",null),e(this,"error",""),e(this,"errors",""),e(this,"message",""),this.data=r.data,this.error=r.error,this.errors=r.errors,this.message=r.message}getData(){return this.data}getError(){return this.error}getErrors(){return this.errors}getMessage(){return this.message}}const d=o({components:{VForm:s},props:{action:{type:String,required:!0,default:()=>""},method:{type:String,default:()=>"POST"},formData:{type:Boolean,default:()=>!1}},emits:["submitedSuccess","submitedError","submitedError"],setup(r,{attrs:e,emit:o,slots:d}){const l=(e,s)=>{const i=r.formData?t(e):e;a(r.action,{method:r.method,data:i}).then((r=>{const e=new m(r);o("submitedSuccess",e)})).catch((r=>{let e;try{e=JSON.parse(r.request.response);const t=new m(e);s.setErrors(t.getErrors()),o("submitedError",t)}catch(t){throw new Error(r.request.response)}}))};return()=>i(u,null,[i(s,n({onSubmit:l},e),{default:()=>{var r;return[i(u,null,[null==(r=d.default)?void 0:r.call(d)])]},...d})])}});export{d as default};
