import{u as e,b as a,a as s}from"./index.96a51d4a.js";import{s as n}from"./index.110bc6e2.js";import{$ as t,aH as o,s as u,b as r}from"./vendor.4e8d2bd0.js";const l=e(),{loading:c}=t(l),i=e=>{n(e,c)};function d(){return{getErrorResponse:async e=>{const s=o(),n=o(),t=o();if(e.response){const o=e.response.request;s.value=o.status,n.value=o.statusText,[400,422].includes(s.value)?t.value=JSON.parse(o.response):[401].includes(s.value)?await(async()=>{const{logOutUser:e}=a();await e()})():[405,404].includes(s.value)}return{status:s,statusText:n,eResponse:t}}}}function v(e,a){const n=a,t=s,l=u(),c=o(),i=u(!1),v=u(!0),p=u(!1),f=o(),b=o(),g=r.CancelToken.source(),m=e=>{!i.value&&v.value&&(g.cancel(e),p.value=!0,v.value=!1,i.value=!1)};return t(e,{...n,cancelToken:g.token}).then((e=>{l.value=e,c.value=e.data})).catch((async e=>{const{getErrorResponse:a}=d(),{eResponse:s}=await a(e);f.value=s,b.value=e})).finally((()=>{v.value=!1,i.value=!0})),{response:l,data:c,error:b,finished:i,loading:v,isFinished:i,isLoading:v,cancel:m,canceled:p,aborted:p,abort:m}}export{i as s,v as u};
